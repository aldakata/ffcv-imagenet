export CUDA_VISIBLE_DEVICES=0,1,2,3,4,5,6,7

python train_baseline.py --config-file rn50_configs/rn50_88_epochs.yaml \
    --logging.folder=results/ \
    --loss.loss=sigmoid \
    --logging.log_level=1 \
    --logging.experiment_name=11Nov \
    --data.val_dataset=/mnt/lustre/work/oh/owl156/HardNegativeSamples/ffcv-imagenet/val_500_0.50_90.ffcv \
    --loss.mu=0 \
    --loss.lmbd=0 \
    --lr.lr=1.5 \
    --lr.lr_schedule_type=cyclic \
    --data.train_dataset=/mnt/lustre/work/oh/owl156/HardNegativeSamples/ffcv-imagenet/train_500_0.50_90.ffcv \
    --training.optimizer=sgd
sleep 2m

python train_baseline.py --config-file rn50_configs/rn50_88_epochs.yaml \
    --logging.folder=results/ \
    --loss.loss=sigmoid \
    --logging.log_level=1 \
    --logging.experiment_name=11Nov \
    --data.val_dataset=/mnt/lustre/work/oh/owl156/HardNegativeSamples/ffcv-imagenet/val_500_0.50_90.ffcv \
    --loss.mu=0 \
    --loss.lmbd=0 \
    --lr.lr=1.5 \
    --lr.lr_schedule_type=cyclic \
    --data.train_dataset=/mnt/lustre/work/oh/owl156/HardNegativeSamples/ffcv-imagenet/train_500_0.50_90.ffcv \
    --training.optimizer=sgd
sleep 2m

python train_baseline.py --config-file rn50_configs/rn50_88_epochs.yaml \
    --logging.folder=results/ \
    --loss.loss=sigmoid \
    --logging.log_level=1 \
    --logging.experiment_name=11Nov \
    --data.val_dataset=/mnt/lustre/work/oh/owl156/HardNegativeSamples/ffcv-imagenet/val_500_0.50_90.ffcv \
    --loss.mu=0 \
    --loss.lmbd=0 \
    --lr.lr=1.5 \
    --lr.lr_schedule_type=cyclic \
    --data.train_dataset=/mnt/lustre/work/oh/owl156/HardNegativeSamples/ffcv-imagenet/train_500_0.50_90.ffcv \
    --training.optimizer=sgd
sleep 2m

python train_baseline.py --config-file rn50_configs/rn50_88_epochs.yaml \
    --logging.folder=results/ \
    --loss.loss=sigmoid \
    --logging.log_level=1 \
    --logging.experiment_name=11Nov \
    --data.val_dataset=/mnt/lustre/work/oh/owl156/HardNegativeSamples/ffcv-imagenet/val_500_0.50_90.ffcv \
    --loss.mu=0 \
    --loss.lmbd=0 \
    --lr.lr=1.5 \
    --lr.lr_schedule_type=cyclic \
    --data.train_dataset=/mnt/lustre/work/oh/owl156/HardNegativeSamples/ffcv-imagenet/train_500_0.50_90.ffcv \
    --training.optimizer=sgd
sleep 2m

python train_baseline.py --config-file rn50_configs/rn50_88_epochs.yaml \
    --logging.folder=results/ \
    --loss.loss=sigmoid \
    --logging.log_level=1 \
    --logging.experiment_name=11Nov \
    --data.val_dataset=/mnt/lustre/work/oh/owl156/HardNegativeSamples/ffcv-imagenet/val_500_0.50_90.ffcv \
    --loss.mu=0 \
    --loss.lmbd=0 \
    --lr.lr=1.5 \
    --lr.lr_schedule_type=cyclic \
    --data.train_dataset=/mnt/lustre/work/oh/owl156/HardNegativeSamples/ffcv-imagenet/train_500_0.50_90.ffcv \
    --training.optimizer=sgd
sleep 2m

python train_baseline.py --config-file rn50_configs/rn50_88_epochs.yaml \
    --logging.folder=results/ \
    --loss.loss=sigmoid \
    --logging.log_level=1 \
    --logging.experiment_name=11Nov \
    --data.val_dataset=/mnt/lustre/work/oh/owl156/HardNegativeSamples/ffcv-imagenet/val_500_0.50_90.ffcv \
    --loss.mu=0 \
    --loss.lmbd=0 \
    --lr.lr=1.5 \
    --lr.lr_schedule_type=cyclic \
    --data.train_dataset=/mnt/lustre/work/oh/owl156/HardNegativeSamples/ffcv-imagenet/train_500_0.50_90.ffcv \
    --training.optimizer=sgd
sleep 2m

python train_baseline.py --config-file rn50_configs/rn50_88_epochs.yaml \
    --logging.folder=results/ \
    --loss.loss=sigmoid \
    --logging.log_level=1 \
    --logging.experiment_name=11Nov \
    --data.val_dataset=/mnt/lustre/work/oh/owl156/HardNegativeSamples/ffcv-imagenet/val_500_0.50_90.ffcv \
    --loss.mu=0 \
    --loss.lmbd=0 \
    --lr.lr=1.5 \
    --lr.lr_schedule_type=cyclic \
    --data.train_dataset=/mnt/lustre/work/oh/owl156/HardNegativeSamples/ffcv-imagenet/train_500_0.50_90.ffcv \
    --training.optimizer=sgd
sleep 2m

python train_baseline.py --config-file rn50_configs/rn50_88_epochs.yaml \
    --logging.folder=results/ \
    --loss.loss=sigmoid \
    --logging.log_level=1 \
    --logging.experiment_name=11Nov \
    --data.val_dataset=/mnt/lustre/work/oh/owl156/HardNegativeSamples/ffcv-imagenet/val_500_0.50_90.ffcv \
    --loss.mu=0 \
    --loss.lmbd=0 \
    --lr.lr=1.5 \
    --lr.lr_schedule_type=cyclic \
    --data.train_dataset=/mnt/lustre/work/oh/owl156/HardNegativeSamples/ffcv-imagenet/train_500_0.50_90.ffcv \
    --training.optimizer=sgd
sleep 2m

python train_baseline.py --config-file rn50_configs/rn50_88_epochs.yaml \
    --logging.folder=results/ \
    --loss.loss=sigmoid \
    --logging.log_level=1 \
    --logging.experiment_name=11Nov \
    --data.val_dataset=/mnt/lustre/work/oh/owl156/HardNegativeSamples/ffcv-imagenet/val_500_0.50_90.ffcv \
    --loss.mu=0 \
    --loss.lmbd=0 \
    --lr.lr=1.5 \
    --lr.lr_schedule_type=cyclic \
    --data.train_dataset=/mnt/lustre/work/oh/owl156/HardNegativeSamples/ffcv-imagenet/train_500_0.50_90.ffcv \
    --training.optimizer=sgd
sleep 2m

python train_baseline.py --config-file rn50_configs/rn50_88_epochs.yaml \
    --logging.folder=results/ \
    --loss.loss=sigmoid \
    --logging.log_level=1 \
    --logging.experiment_name=11Nov \
    --data.val_dataset=/mnt/lustre/work/oh/owl156/HardNegativeSamples/ffcv-imagenet/val_500_0.50_90.ffcv \
    --loss.mu=0 \
    --loss.lmbd=0 \
    --lr.lr=1.5 \
    --lr.lr_schedule_type=cyclic \
    --data.train_dataset=/mnt/lustre/work/oh/owl156/HardNegativeSamples/ffcv-imagenet/train_500_0.50_90.ffcv \
    --training.optimizer=sgd
sleep 2m

# lr_values_adam=(0.0005 1 0.7 0.0007)
# lr_values_sgd=(0.0005 1 0.7 0.0007)

# lr_type=("cyclic" "step")
# optimizer=("sgd" "adam")

# # Loop over indices (since both lr arrays have same length)
# for i in "${!lr_values_adam[@]}"; do
#     # First loop for SGD optimizer
#     for ty in "${lr_type[@]}"; do
#         python train_baseline.py --config-file rn50_configs/rn50_88_epochs.yaml \
#             --logging.folder=results/ \
#             --loss.loss=sigmoid \
#             --logging.log_level=2 \
#             --logging.experiment_name=11Nov \
#             --data.val_dataset=/mnt/lustre/work/oh/owl156/HardNegativeSamples/ffcv-imagenet/val_500_0.50_90.ffcv \
#             --loss.mu=0 \
#             --loss.lmbd=0 \
#             --lr.lr=${lr_values_sgd[$i]} \
#             --lr.lr_schedule_type=${ty} \
#             --data.train_dataset=/mnt/lustre/work/oh/owl156/HardNegativeSamples/ffcv-imagenet/train_500_0.50_90.ffcv \
#             --training.optimizer=sgd
#         echo "sleeping"
#         sleep 2m
#     done

#     # Second loop for Adam optimizer
#     for ty in "${lr_type[@]}"; do
#         python train_baseline.py --config-file rn50_configs/rn50_88_epochs.yaml \
#             --logging.folder=results/ \
#             --loss.loss=sigmoid \
#             --logging.log_level=2 \
#             --logging.experiment_name=11Nov \
#             --data.val_dataset=/mnt/lustre/work/oh/owl156/HardNegativeSamples/ffcv-imagenet/val_500_0.50_90.ffcv \
#             --loss.mu=0 \
#             --loss.lmbd=0 \
#             --lr.lr=${lr_values_adam[$i]} \
#             --lr.lr_schedule_type=${ty} \
#             --data.train_dataset=/mnt/lustre/work/oh/owl156/HardNegativeSamples/ffcv-imagenet/train_500_0.50_90.ffcv \
#             --training.optimizer=adam
#         echo "sleeping"
#         sleep 2m
#     done
# done
